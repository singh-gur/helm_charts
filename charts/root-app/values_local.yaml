argocdNamespace: argocd

lgtm:
  enabled: false
  version: 3.0.1
  grafana:
    enabled: true
    ingress:
      enabled: true
      host: grafana.gsingh.io
    admin:
      existingSecret: grafana-admin-credentials
      userKey: admin-user
      passwordKey: admin-password
  loki:
    enabled: true
    gateway:
      ingress:
        enabled: false
        host: loki-gateway.gsingh.io
    s3:
      enabled: false
      existingSecret: loki-s3-credentials
      retentionPeriod: 30d
  mimir:
    enabled: true
    s3:
      enabled: false
      existingSecret: loki-s3-credentials
  tempo:
    enabled: true
    s3:
      enabled: false
      existingSecret: loki-s3-credentials

alloy:
  enabled: false
  version: 1.0.3

authentik:
  enabled: false
  version: "2025.10.3"
  namespace: default
  existingSecret: authentik-secret
  # External PostgreSQL configuration
  postgresql:
    host: 192.168.2.119
    port: 5432
    database: authentik
    username: authentik
  trusted_proxy_cidrs:
    "192.168.0.0/16"
    # Password is read from existingSecret
  # Email settings (optional, leave disabled if not needed)
  email:
    enabled: false
    host: ""
    port: 587
    username: ""
    from: ""
    use_tls: false
  # Error reporting (optional)
  error_reporting:
    enabled: false
    environment: "production"
  # Log level
  log_level: "info"
  # Server configuration
  server:
    replicas: 1
  # Worker configuration
  worker:
    replicas: 1
  # Ingress configuration
  ingress:
    enabled: true
    host: authentik.gsingh.io
  tls:
    enabled: false

airflow:
  enabled: false
  version: "25.0.2" # Bitnami Airflow Helm chart version
  namespace: default
  global:
    security:
      allowInsecureImages: true
  image:
    registry: regv2.gsingh.io
    repository: core/airflow
    tag: 3.0.5
  auth:
    existingSecret: airflow-secrets
    # username: user
    # password: airflow
    # fernetKey: ""
    # secretKey: ""
  executor: CeleryExecutor
  loadExamples: false
  ingress:
    enabled: true
    host: airflow.gsingh.io
    # ingressClassName: nginx
    annotations: {}
    tls: false
  postgresql:
    enabled: true # Use bundled PostgreSQL
    image:
      registry: regv2.gsingh.io
      repository: core/postgresql
      tag: "16.4"
  externalDatabase:
    host: 192.168.2.119
    port: 5432
    database: airflow
    existingSecret: airflow-db-secret
    # user: airflow
    # password: airflow
  redis:
    enabled: true # Use bundled Redis
    image:
      registry: regv2.gsingh.io
      repository: core/redis
      tag: "7.4"
  dags:
    gitSync:
      enabled: false
      repo: "" # Git repository URL for DAGs
      branch: main
      name: dags
      path: ""
      # sshKeySecret: ""
  # webserverReplicaCount: 1
  # schedulerReplicaCount: 1
  # workerReplicas: 1
  usePasswordFiles: true

argowf:
  enabled: false
  version: 0.45.6
  ingress:
    host: argowf.gsingh.io
  sso:
    issuer: https://auth.gsingh.io
    redirectUrl: https://argowf.gsingh.io/oauth2/callback
argocd:
  enabled: false
coder:
  enabled: false
  version: 2.29.1
  ingress:
    host: ide.gsingh.io
  accessUrl: https://ide.gsingh.io
  oidc:
    ignoreEmailVerified: true
    signInText: "SSO Login"
ghost:
  enabled: false
  version: 24.0.1
  ghostHost: ghost.gsingh.io
  ingress:
    hostname: blog.gsingh.io
  ghostEmail: hello@gsingh.io
langfuse:
  enabled: false
  version: 1.5.15
  ingress:
    host: langfuse.gsingh.io
  clickhouse:
    enabled: true
    deploy: true
    migration:
      autoMigrate: true
protonbridge:
  enabled: false
  version: 5.4.2
rancher:
  enabled: false
  version: 2.11.2
  hostname: rancher.gsingh.io
rootapp:
  enabled: false
uptime:
  enabled: false
  version: 2.21.3
  ingress:
    host: uptime.gsingh.io
whoami:
  enabled: true
openproject:
  enabled: false
  admin_user:
    password_reset: false
    name: "gurbakhshish"
    mail: "hello@gsingh.io"
    secret: openproject-admin-secrets
  s3:
    enabled: true
    existingSecret: openproject-s3-secrets
    bucketName: gsingh19-openproject
    # endpoint: https://s3.gsingh.io
  appInit:
    resources:
      limits:
        memory: "1Gi"
      requests:
        memory: "1Gi"
  version: 10.3.0
  ingress:
    enabled: true
    host: projects.gsingh.io
  postgresql:
    bundled: false
    host: 192.168.2.119
    database: openproject
    username: openprojectuser
  oidc:
    enabled: false # Set to true to enable OIDC authentication
    provider: "Zitadel"
    displayName: "Zitadel SSO"
    host: "auth.gsingh.io"
    scope: "[openid profile email]"
zitadel:
  enabled: false
  version: 9.15.0
  externalDomain: auth.gsingh.io
  ingress:
    host: auth.gsingh.io
  masterkeySecretName: zitadel-masterkey
  configSecretName: zitadel-secrets
  login:
    enabled: false
    ingress:
      enabled: false

windmill:
  enabled: false
  version: 4.0.21
  host: windmill.gsingh.io
  postgresql:
    enabled: true
  databaseSecret:
    name: windmill-secrets
    key: database-url
    enabled: false
promtail:
  enabled: false
  version: 6.17.0
  config:
    clients:
      - url: http://lgtm-loki-gateway.default.svc.cluster.local:80/loki/api/v1/push
  resources:
    limits:
      cpu: 200m
      memory: 128Mi
    requests:
      cpu: 100m
      memory: 128Mi
k8sMonitoring:
  enabled: false
  version: 3.5.7
  # LGTM Stack endpoints
  endpoints:
    loki: http://lgtm-loki-gateway.default.svc.cluster.local:80/loki/api/v1/push
    mimir: http://lgtm-mimir.default.svc.cluster.local:9009/api/v1/push
    tempo: http://lgtm-tempo.default.svc.cluster.local:4318
  # Cluster metrics collection
  clusterMetrics:
    enabled: true
    kubeStateMetrics:
      enabled: true
    nodeExporter:
      enabled: true
    windowsExporter:
      enabled: false
    opencost:
      enabled: false
    kepler:
      enabled: false
  # Logs collection
  logs:
    enabled: true
    podLogs:
      enabled: true
    nodeLogs:
      enabled: true
    clusterEvents:
      enabled: true
  # Application observability
  applicationObservability:
    enabled: true
    otlp:
      enabled: true
  # Traces collection
  traces:
    enabled: true
  # Metrics configuration
  metrics:
    enabled: true
    cost:
      enabled: false
kyuubi:
  enabled: false
  namespace: default
  replicaCount: 2
  image:
    repository: apache/kyuubi
    tag: "1.10.2-all"
  resources:
    limits:
      cpu: 2
      memory: 4Gi
    requests:
      cpu: 1
      memory: 2Gi

trino:
  enabled: false
  version: "1.41.0"
  namespace: data-platform
  ingress:
    host: trino.gsingh.io
  server:
    workers: 4
  auth:
    enabled: true
    # When enabled, set server.config.authenticationType to PASSWORD
    # Create a secret with password.db key containing htpasswd formatted credentials
    # Example: kubectl create secret generic trino-password-auth --from-file=password.db=./password.db
    passwordAuthSecret: "trino-password-auth"
    # Shared secret for internal communication between coordinator and workers (REQUIRED when auth is enabled)
    # Create a secret with TRINO_SHARED_SECRET key containing a random string
    # Example: kubectl create secret generic trino-shared-secret --from-literal=TRINO_SHARED_SECRET=$(openssl rand -base64 32)
    sharedSecretName: "trino-shared-secret"
    # Optional: Enable group-based access control
    groups:
      enabled: false
      # Create a secret with group.db key containing group definitions
      # Format: group_name:user1,user2,user3
      groupsAuthSecret: "trino-groups-auth"
  catalogs:
    iceberg:
      enabled: true
      catalogName: iceberg
      warehouse: s3a://datastore/iceberg
      s3:
        endpoint: https://s3v2.gsingh.io
        region: us-east-1
        pathStyleAccess: true
      credentialsSecret: trino-iceberg-s3

dagster:
  enabled: true
  version: 1.12.10
  namespace: dagster
  ingress:
    host: dagster.gsingh.io
  postgresql:
    enabled: true # Use embedded PostgreSQL for local development
    host: ""
    database: dagster
    existingSecret: ""
  userCode:
    enabled: true
    image:
      repository: regv2.gsingh.io/personal/sample-dagster
      tag: latest
      pullPolicy: Always
    imagePullSecrets:
      - regv2-secret
    codeFile: /apps/sample-dagster/main.py

prefect:
  enabled: true
  version: "2026.1.8195301"
  namespace: default
  ingress:
    host: prefect.gsingh.io
    tls: true
    selfSigned: true
  postgresql:
    useEmbedded: true
    existingSecret: "prefect-db-secret"
  basicAuth:
    enabled: true
    existingSecret: "prefect-basic-auth"
  uiApiUrl: "http://localhost:4200/api"
  # Custom image (uncomment and set to use custom registry)
  image:
    repository: regv2.gsingh.io/core/prefect_ext
    tag: "3.6.10-python3.11_0.0.1"
    pullSecrets: ["regv2-secret"]

prefectWorker:
  enabled: true
  version: "2026.1.8195301"
  namespace: default
  replicaCount: 3
  workPool: "kubernetes"
  apiUrl: "http://prefect-server.default.svc.cluster.local:4200/api"
  basicAuth:
    enabled: true
    existingSecret: "prefect-basic-auth"
  # Custom image (uncomment and set to use custom registry)
  image:
    repository: regv2.gsingh.io/core/prefect_ext
    tag: "kube_worker"
    pullSecrets: ["regv2-secret"]
    # debug: false

  # RBAC configuration for Kubernetes worker
  # These permissions allow the worker to create and manage Kubernetes resources
  # for flow runs using prefect_kubernetes.jobs.KubernetesJob
  # NOTE: These permissions are namespace-scoped (Role, not ClusterRole)
  # The worker can only manage resources in its own namespace (default)
  role:
    extraPermissions:
      # Allow worker to create, update, and delete pods for flow runs
      - apiGroups: [""]
        resources: ["pods", "pods/log", "pods/status"]
        verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
      # Allow worker to manage services (for flow run networking)
      - apiGroups: [""]
        resources: ["services"]
        verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
      # Allow worker to manage configmaps (for flow run configuration)
      - apiGroups: [""]
        resources: ["configmaps"]
        verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
      # Allow worker to read events for monitoring
      - apiGroups: [""]
        resources: ["events"]
        verbs: ["get", "list", "watch"]
      # Allow worker to manage persistent volume claims (for flow run storage)
      - apiGroups: [""]
        resources: ["persistentvolumeclaims"]
        verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
