{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Root App Values",
  "description": "Schema validation for root-app chart values",
  "type": "object",
  "properties": {
    "lgtm": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "grafana": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "ingress": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "host": {
                  "type": "string",
                  "format": "hostname"
                }
              },
              "required": ["enabled"]
            },
            "admin": {
              "type": "object",
              "properties": {
                "existingSecret": {
                  "type": "string",
                  "minLength": 1
                },
                "userKey": {
                  "type": "string",
                  "minLength": 1
                },
                "passwordKey": {
                  "type": "string",
                  "minLength": 1
                }
              },
              "required": ["existingSecret", "userKey", "passwordKey"]
            }
          },
          "required": ["enabled"]
        },
        "loki": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "gateway": {
              "type": "object",
              "properties": {
                "ingress": {
                  "type": "object",
                  "properties": {
                    "enabled": {
                      "type": "boolean",
                      "default": false
                    },
                    "host": {
                      "type": "string",
                      "format": "hostname"
                    }
                  },
                  "required": ["enabled"]
                }
              },
              "required": ["ingress"]
            }
          },
          "required": ["enabled"]
        }
      },
      "required": ["enabled"]
    },
    "alloy": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        }
      },
      "required": ["enabled"]
    },
    "authentik": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "namespace": {
          "type": "string",
          "minLength": 1
        },
        "existingSecret": {
          "type": "string",
          "minLength": 1
        },
        "postgresql": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string",
              "format": "hostname"
            },
            "port": {
              "type": "integer",
              "minimum": 1,
              "maximum": 65535
            },
            "database": {
              "type": "string",
              "minLength": 1
            },
            "username": {
              "type": "string",
              "minLength": 1
            }
          }
        },
        "email": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "host": {
              "type": "string"
            },
            "port": {
              "type": "integer",
              "minimum": 1,
              "maximum": 65535
            },
            "username": {
              "type": "string"
            },
            "from": {
              "type": "string"
            },
            "use_tls": {
              "type": "boolean",
              "default": false
            }
          }
        },
        "error_reporting": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "environment": {
              "type": "string",
              "minLength": 1
            }
          }
        },
        "log_level": {
          "type": "string",
          "enum": ["debug", "info", "warning", "error"]
        },
        "ingress": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "host": {
              "type": "string",
              "format": "hostname"
            }
          }
        },
        "server": {
          "type": "object",
          "properties": {
            "replicas": {
              "type": "integer",
              "minimum": 1
            }
          }
        },
        "worker": {
          "type": "object",
          "properties": {
            "replicas": {
              "type": "integer",
              "minimum": 1
            }
          }
        }
      },
      "required": ["enabled", "version", "postgresql"]
    },
    "airflow": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "namespace": {
          "type": "string",
          "minLength": 1
        },
        "global": {
          "type": "object",
          "properties": {
            "security": {
              "type": "object",
              "properties": {
                "allowInsecureImages": {
                  "type": "boolean",
                  "default": false
                }
              }
            }
          }
        },
        "image": {
          "type": "object",
          "properties": {
            "registry": {
              "type": "string"
            },
            "repository": {
              "type": "string"
            },
            "tag": {
              "type": "string"
            }
          }
        },
        "auth": {
          "type": "object",
          "properties": {
            "existingSecret": {
              "type": "string"
            },
            "username": {
              "type": "string"
            },
            "password": {
              "type": "string"
            },
            "fernetKey": {
              "type": "string"
            },
            "secretKey": {
              "type": "string"
            }
          }
        },
        "executor": {
          "type": "string",
          "enum": ["LocalExecutor", "CeleryExecutor", "KubernetesExecutor", "SequentialExecutor", "CeleryKubernetesExecutor", "LocalKubernetesExecutor"]
        },
        "loadExamples": {
          "type": "boolean",
          "default": false
        },
        "ingress": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "host": {
              "type": "string",
              "format": "hostname"
            },
            "ingressClassName": {
              "type": "string"
            },
            "annotations": {
              "type": "object"
            },
            "tls": {
              "type": "boolean",
              "default": false
            }
          }
        },
        "postgresql": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            }
          }
        },
        "externalDatabase": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string"
            },
            "port": {
              "type": "integer",
              "minimum": 1,
              "maximum": 65535
            },
            "database": {
              "type": "string"
            },
            "existingSecret": {
              "type": "string"
            },
            "user": {
              "type": "string"
            },
            "password": {
              "type": "string"
            }
          }
        },
        "redis": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            }
          }
        },
        "dags": {
          "type": "object",
          "properties": {
            "gitSync": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "repo": {
                  "type": "string",
                  "anyOf": [
                    {
                      "format": "uri"
                    },
                    {
                      "maxLength": 0
                    }
                  ]
                },
                "branch": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "path": {
                  "type": "string"
                },
                "sshKeySecret": {
                  "type": "string"
                }
              }
            }
          }
        },
        "webserverReplicaCount": {
          "type": "integer",
          "minimum": 1
        },
        "schedulerReplicaCount": {
          "type": "integer",
          "minimum": 1
        },
        "workerReplicas": {
          "type": "integer",
          "minimum": 1
        },
        "usePasswordFiles": {
          "type": "boolean",
          "default": false
        }
      },
      "required": ["enabled"]
    },
    "argowf": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "ingress": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string",
              "format": "hostname"
            }
          },
          "required": ["host"]
        },
        "sso": {
          "type": "object",
          "properties": {
            "issuer": {
              "type": "string",
              "format": "uri"
            },
            "redirectUrl": {
              "type": "string",
              "format": "uri"
            }
          },
          "required": ["issuer", "redirectUrl"]
        }
      },
      "required": ["enabled"]
    },
    "argocd": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        }
      },
      "required": ["enabled"]
    },
    "coder": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "ingress": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string",
              "format": "hostname"
            }
          },
          "required": ["host"]
        },
        "accessUrl": {
          "type": "string",
          "format": "uri"
        }
      },
      "required": ["enabled"]
    },
    "ghost": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "ghostHost": {
          "type": "string",
          "format": "hostname"
        },
        "ingress": {
          "type": "object",
          "properties": {
            "hostname": {
              "type": "string",
              "format": "hostname"
            }
          },
          "required": ["hostname"]
        },
        "ghostEmail": {
          "type": "string",
          "format": "email"
        }
      },
      "required": ["enabled"]
    },
    "langfuse": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "ingress": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string",
              "format": "hostname"
            }
          },
          "required": ["host"]
        },
        "clickhouse": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "deploy": {
              "type": "boolean",
              "default": false
            },
            "migration": {
              "type": "object",
              "properties": {
                "autoMigrate": {
                  "type": "boolean",
                  "default": false
                }
              },
              "required": ["autoMigrate"]
            }
          },
          "required": ["enabled"]
        }
      },
      "required": ["enabled"]
    },
    "protonbridge": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        }
      },
      "required": ["enabled"]
    },
    "promtail": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "config": {
          "type": "object",
          "properties": {
            "clients": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "url": {
                    "type": "string",
                    "format": "uri"
                  }
                },
                "required": ["url"]
              },
              "minItems": 1
            }
          },
          "required": ["clients"]
        },
        "resources": {
          "type": "object",
          "properties": {
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "pattern": "^[0-9]+(\\.[0-9]+)?m?$"
                },
                "memory": {
                  "type": "string",
                  "pattern": "^[0-9]+(\\.[0-9]+)?(Ki|Mi|Gi|Ti)$"
                }
              }
            },
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "pattern": "^[0-9]+(\\.[0-9]+)?m?$"
                },
                "memory": {
                  "type": "string",
                  "pattern": "^[0-9]+(\\.[0-9]+)?(Ki|Mi|Gi|Ti)$"
                }
              }
            }
          }
        }
      },
      "required": ["enabled"]
    },
    "rancher": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "hostname": {
          "type": "string",
          "format": "hostname"
        }
      },
      "required": ["enabled"]
    },
    "rootapp": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        }
      },
      "required": ["enabled"]
    },
    "uptime": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "ingress": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string",
              "format": "hostname"
            }
          },
          "required": ["host"]
        }
      },
      "required": ["enabled"]
    },
    "whoami": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        }
      },
      "required": ["enabled"]
    },
    "openproject": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "admin_user": {
          "type": "object",
          "properties": {
            "password_reset": {
              "type": "boolean",
              "default": false
            },
            "name": {
              "type": "string",
              "minLength": 1
            },
            "mail": {
              "type": "string",
              "format": "email"
            },
            "secret": {
              "type": "string",
              "minLength": 1
            }
          },
          "required": ["password_reset", "name", "mail", "secret"]
        },
        "s3": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "existingSecret": {
              "type": "string",
              "minLength": 1
            },
            "bucketName": {
              "type": "string",
              "minLength": 1
            },
            "endpoint": {
              "type": "string",
              "format": "uri"
            }
          },
          "required": ["enabled", "existingSecret", "bucketName"]
        },
        "appInit": {
          "type": "object",
          "properties": {
            "resources": {
              "type": "object",
              "properties": {
                "limits": {
                  "type": "object",
                  "properties": {
                    "memory": {
                      "type": "string",
                      "pattern": "^[0-9]+(\\.[0-9]+)?(Mi|Gi|Ti)$"
                    }
                  },
                  "required": ["memory"]
                },
                "requests": {
                  "type": "object",
                  "properties": {
                    "memory": {
                      "type": "string",
                      "pattern": "^[0-9]+(\\.[0-9]+)?(Mi|Gi|Ti)$"
                    }
                  },
                  "required": ["memory"]
                }
              },
              "required": ["limits", "requests"]
            }
          },
          "required": ["resources"]
        },
        "ingress": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "host": {
              "type": "string",
              "format": "hostname"
            }
          },
          "required": ["enabled", "host"]
        },
        "postgresql": {
          "type": "object",
          "properties": {
            "bundled": {
              "type": "boolean",
              "default": false
            },
            "host": {
              "type": "string",
              "format": "hostname"
            },
            "port": {
              "type": "integer",
              "minimum": 1,
              "maximum": 65535
            },
            "database": {
              "type": "string",
              "minLength": 1
            },
            "username": {
              "type": "string",
              "minLength": 1
            }
          },
          "required": ["bundled"]
        },
        "oidc": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "provider": {
              "type": "string",
              "minLength": 1
            },
            "displayName": {
              "type": "string",
              "minLength": 1
            },
            "host": {
              "type": "string",
              "format": "hostname"
            },
            "scope": {
              "type": "string",
              "minLength": 1
            },
            "authorizationEndpoint": {
              "type": "string",
              "format": "uri"
            },
            "tokenEndpoint": {
              "type": "string",
              "format": "uri"
            },
            "userinfoEndpoint": {
              "type": "string",
              "format": "uri"
            },
            "endSessionEndpoint": {
              "type": "string",
              "format": "uri"
            }
          },
          "required": ["enabled"]
        }
      },
      "required": ["enabled"]
    },
    "zitadel": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "externalDomain": {
          "type": "string",
          "format": "hostname"
        },
        "ingress": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string",
              "format": "hostname"
            }
          },
          "required": ["host"]
        }
      },
      "required": ["enabled"]
    },
    "plane": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "planeVersion": {
          "type": "string",
          "enum": ["stable", "beta", "alpha"]
        },
        "ingress": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "host": {
              "type": "string",
              "format": "hostname"
            }
          },
          "required": ["enabled", "host"]
        },
        "redis": {
          "type": "object",
          "properties": {
            "local_setup": {
              "type": "boolean",
              "default": false
            },
            "remote_url": {
              "type": "string",
              "anyOf": [
                {
                  "format": "uri"
                },
                {
                  "maxLength": 0
                }
              ]
            }
          },
          "required": ["local_setup"]
        },
        "postgres": {
          "type": "object",
          "properties": {
            "local_setup": {
              "type": "boolean",
              "default": false
            },
            "remote_url": {
              "type": "string",
              "anyOf": [
                {
                  "format": "uri"
                },
                {
                  "maxLength": 0
                }
              ]
            }
          },
          "required": ["local_setup"]
        },
        "minio": {
          "type": "object",
          "properties": {
            "local_setup": {
              "type": "boolean",
              "default": false
            },
            "aws_access_key": {
              "type": "string"
            },
            "aws_secret_access_key": {
              "type": "string"
            },
            "aws_region": {
              "type": "string"
            },
            "aws_s3_endpoint_url": {
              "type": "string",
              "anyOf": [
                {
                  "format": "uri"
                },
                {
                  "maxLength": 0
                }
              ]
            }
          },
          "required": ["local_setup"]
        },
        "env": {
          "type": "object",
          "properties": {
            "pgdb_username": {
              "type": "string",
              "minLength": 1
            },
            "pgdb_name": {
              "type": "string",
              "minLength": 1
            },
            "docstore_bucket": {
              "type": "string",
              "minLength": 1
            },
            "secret_key": {
              "type": "string"
            },
            "cors_allowed_origins": {
              "type": "string"
            }
          },
          "required": ["pgdb_username", "pgdb_name", "docstore_bucket"]
        },
        "web": {
          "type": "object",
          "properties": {
            "replicas": {
              "type": "integer",
              "minimum": 1
            }
          },
          "required": ["replicas"]
        },
        "api": {
          "type": "object",
          "properties": {
            "replicas": {
              "type": "integer",
              "minimum": 1
            }
          },
          "required": ["replicas"]
        },
        "worker": {
          "type": "object",
          "properties": {
            "replicas": {
              "type": "integer",
              "minimum": 1
            }
          },
          "required": ["replicas"]
        },
        "external_secrets": {
          "type": "object",
          "properties": {
            "pgdb_existingSecret": {
              "type": "string"
            },
            "doc_store_existingSecret": {
              "type": "string"
            }
          }
        }
      },
      "required": ["enabled"]
    },
    "windmill": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "host": {
          "type": "string",
          "format": "hostname"
        },
        "ingress": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string",
              "format": "hostname"
            }
          },
          "required": ["host"]
        },
        "databaseUrlSecretName": {
          "type": "string",
          "minLength": 1
        },
        "databaseUrlSecretKey": {
          "type": "string",
          "minLength": 1
        },
        "postgresql": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            }
          },
          "required": ["enabled"]
        }
      },
      "required": ["enabled"]
    },
    "trino": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "namespace": {
          "type": "string",
          "minLength": 1
        },
        "ingress": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string",
              "format": "hostname"
            },
            "className": {
              "type": "string"
            },
            "tls": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "secretName": {
                  "type": "string"
                }
              },
              "required": ["enabled"]
            }
          },
          "required": ["host"]
        },
        "server": {
          "type": "object",
          "properties": {
            "workers": {
              "type": "integer",
              "minimum": 1
            }
          }
        },
        "catalogs": {
          "type": "object",
          "properties": {
            "iceberg": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "catalogName": {
                  "type": "string",
                  "default": "iceberg"
                },
                "warehouse": {
                  "type": "string",
                  "minLength": 1
                },
                "s3": {
                  "type": "object",
                  "properties": {
                    "endpoint": {
                      "type": "string",
                      "format": "uri"
                    },
                    "region": {
                      "type": "string",
                      "minLength": 1
                    },
                    "pathStyleAccess": {
                      "type": "boolean",
                      "default": false
                    }
                  },
                  "required": ["endpoint", "region"]
                },
                "credentialsSecret": {
                  "type": "string"
                }
              },
              "required": ["enabled"]
            }
          }
        }
      },
      "required": ["enabled"]
    },
    "prefect": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "ingress": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string",
              "format": "hostname"
            }
          },
          "required": ["host"]
        },
        "postgresql": {
          "type": "object",
          "properties": {
            "existingSecret": {
              "type": "string",
              "minLength": 1
            }
          },
          "required": ["existingSecret"]
        }
      },
      "required": ["enabled"]
    }
  }
}

